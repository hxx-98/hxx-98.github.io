<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>《数据库系统概论》(王珊  萨师煊)复习笔记（三） | Hxx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="第三章  关系数据库标准语言SQL1 SQL概述  QL(Structured Query Language)：结构化查询语言，是关系数据库的标准语言，SQL是一个通用的、功能极强的关系数据库语言  特点 （1）综合统一  集数据定义语言（DDL），数据操纵语言（DML），数据控制语（DCL）功能于一体。 可以独立完成数据库生命周期中的全部活动： 定义关系模式，插入数据，建立数据库； 对数据库中的">
<meta property="og:type" content="article">
<meta property="og:title" content="《数据库系统概论》(王珊  萨师煊)复习笔记（三）">
<meta property="og:url" content="http://hxx-98.github.io/2020/03/12/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/index.html">
<meta property="og:site_name" content="Hxx">
<meta property="og:description" content="第三章  关系数据库标准语言SQL1 SQL概述  QL(Structured Query Language)：结构化查询语言，是关系数据库的标准语言，SQL是一个通用的、功能极强的关系数据库语言  特点 （1）综合统一  集数据定义语言（DDL），数据操纵语言（DML），数据控制语（DCL）功能于一体。 可以独立完成数据库生命周期中的全部活动： 定义关系模式，插入数据，建立数据库； 对数据库中的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/SQL%E4%B8%89%E7%BA%A7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.PNG">
<meta property="og:image" content="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6.PNG">
<meta property="og:image" content="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/sql%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89.PNG">
<meta property="article:published_time" content="2020-03-12T07:22:04.000Z">
<meta property="article:modified_time" content="2020-03-13T05:21:29.341Z">
<meta property="article:author" content="hxx-98">
<meta property="article:tag" content="《数据库系统概论》">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/SQL%E4%B8%89%E7%BA%A7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.PNG">
  
    <link rel="alternate" href="/atom.xml" title="Hxx" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hxx</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hxx-98.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-数据库复习笔记三" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/12/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/" class="article-date">
  <time datetime="2020-03-12T07:22:04.000Z" itemprop="datePublished">2020-03-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      《数据库系统概论》(王珊  萨师煊)复习笔记（三）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第三章-关系数据库标准语言SQL"><a href="#第三章-关系数据库标准语言SQL" class="headerlink" title="第三章  关系数据库标准语言SQL"></a>第三章  关系数据库标准语言SQL</h1><h2 id="1-SQL概述"><a href="#1-SQL概述" class="headerlink" title="1 SQL概述"></a>1 SQL概述</h2><ol>
<li><p> QL(Structured Query Language)：结构化查询语言，是关系数据库的标准语言，SQL是一个通用的、功能极强的关系数据库语言</p>
</li>
<li><p><strong>特点</strong></p>
<p>（1）综合统一</p>
<ul>
<li><strong>集数据定义语言（DDL），数据操纵语言（DML），数据控制语（DCL）</strong>功能于一体。</li>
<li>可以独立完成数据库生命周期中的全部活动：<ul>
<li>定义关系模式，插入数据，建立数据库；</li>
<li>对数据库中的数据进行查询和更新；</li>
<li> 数据库重构和维护</li>
<li> 数据库安全性、完整性控制等</li>
</ul>
</li>
<li>用户数据库投入运行后，可根据需要随时逐步修改模式，不影响数据的运行。</li>
<li>数据操作符统一</li>
</ul>
<p>（2）高度非过程化</p>
<ul>
<li>非关系数据模型的数据操纵语言“面向过程”，必须指定存取路径</li>
<li>SQL只要提出“做什么”，无须了解存取路径。</li>
<li>存取路径的选择以及SQL的操作过程由系统自动完成。</li>
</ul>
<p>（3）面向集合的操作方式</p>
<ul>
<li>非关系数据模型采用面向记录的操作方式，操作对象是一条记录</li>
<li>SQL采用集合操作方式<ul>
<li>操作对象、查找结果可以是元组的集合</li>
<li>一次插入、删除、更新操作的对象可以是元组的集合</li>
</ul>
</li>
</ul>
<p>（4）多种使用方式</p>
<ul>
<li><strong>交互式SQL</strong><ul>
<li>一般DBMS都提供联机交互工具</li>
<li>用户可直接键入SQL命令对数据库进行操作</li>
<li>由DBMS来进行解释</li>
</ul>
</li>
<li><strong>嵌入式SQL</strong><ul>
<li>能将SQL语句嵌入到高级语言（宿主语言）</li>
<li>使应用程序充分利用SQL访问数据库的能力、宿主语言的过程处理能力</li>
<li>一般需要预编译，将嵌入的SQL语句转化为宿主语言编译器能处理的语句</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>SQL的功能</strong></p>
<ul>
<li><p>数据定义（DDL）</p>
<ul>
<li>定义、删除、修改基本表（Base Table）</li>
<li>定义、删除视图（View）</li>
<li>定义、删除索引（Index）</li>
</ul>
</li>
<li><p>数据操纵（DML）</p>
<ul>
<li>数据查询</li>
<li>数据增、删、改</li>
</ul>
</li>
<li><p>数据控制（DCL）</p>
<ul>
<li>用户访问权限的授予、收回</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>SQL数据库的体系结构</strong></p>
<p><img src="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/SQL%E4%B8%89%E7%BA%A7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.PNG"></p>
</li>
<li><p><strong>基本表</strong></p>
<ul>
<li>本身独立存在的表</li>
<li>SQL中一个关系就对应一个基本表</li>
<li>一个(或多个)基本表对应一个存储文件</li>
<li>一个表可以带若干索引</li>
</ul>
</li>
<li><p><strong>存储文件</strong></p>
<ul>
<li>逻辑结构组成了关系数据库的内模式</li>
<li>物理结构是任意的，对用户透明</li>
</ul>
</li>
<li><p><strong>视图</strong></p>
<ul>
<li>从一个或几个基本表导出的表</li>
<li>数据库中只存放视图的定义而不存放视图对应的数据</li>
<li>视图是一个虚表</li>
<li>用户可以在视图上再定义视图</li>
</ul>
</li>
</ol>
<h2 id="2-数据查询"><a href="#2-数据查询" class="headerlink" title="2 数据查询"></a>2 数据查询</h2><ol>
<li><p><strong>SQL查询表达式的基本结构</strong></p>
<p>select     属性名表<br>from      关系名表<br>where  (条件表达式)</p>
</li>
<li><p><strong>语句结构</strong></p>
<p><strong>SELECT [ALL|DISTINCT] &lt;目标列表达式&gt; [，&lt;目标列表达式&gt;] …</strong><br><strong>FROM &lt;表名或视图名&gt;[， &lt;表名或视图名&gt; ] …</strong><br><strong>[ WHERE &lt;条件表达式&gt; ]</strong><br><strong>[ GROUP BY &lt;列名1&gt; [ HAVING &lt;条件表达式&gt; ] ]</strong><br><strong>[ ORDER BY &lt;列名2&gt; [ ASC|DESC ] ]；</strong></p>
</li>
<li><p><strong>单表查询</strong></p>
<p>示例：</p>
<ul>
<li>学生-课程模式 S-T :<br>学生表：Student(Sno,Sname,Ssex,Sage,Sdept)<br>课程表：Course(Cno,Cname,Cpno,Ccredit)<br>学生选课表：SC(Sno,Cno,Grade)</li>
</ul>
<p>（1） <strong>选择表中的若干列</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno，Sname <span class="keyword">FROM</span> Student； </span><br><span class="line"><span class="keyword">SELECT</span>  * <span class="keyword">FROM</span> Student； </span><br><span class="line">//<span class="keyword">SELECT</span>子句的&lt;目标列表达式&gt;可以为：算术表达式、字符串、常量函数、列别名 </span><br><span class="line"><span class="keyword">SELECT</span> Sname，<span class="number">2009</span>-Sage <span class="keyword">FROM</span> Student；</span><br><span class="line"><span class="keyword">SELECT</span> Sname，<span class="keyword">LOWER</span>(Sdept)  <span class="keyword">FROM</span> Student；//小写字母表示所有系名</span><br><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">NAME</span>，<span class="keyword">LOWER</span>(Sdept)  DEPARTMENT <span class="keyword">FROM</span> Student；</span><br></pre></td></tr></table></figure>

<p>（2） <strong>选择表中的若干元组</strong></p>
<ul>
<li>消除取值重复的行，如果没有指定DISTINCT关键词，则缺省为ALL </li>
<li>指定DISTINCT关键词，去掉表中重复的行 </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno   <span class="keyword">FROM</span> SC；//等价于：<span class="keyword">SELECT</span> <span class="keyword">ALL</span>  Sno  <span class="keyword">FROM</span> SC；</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Sno <span class="keyword">FROM</span> SC；</span><br></pre></td></tr></table></figure>

<ul>
<li>查询满足条件的元组</li>
<li><strong>常用的查询条件</strong></li>
</ul>
<p><img src="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6.PNG"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">//查询计算机科学系全体学生的名单。</span><br><span class="line">    <span class="keyword">SELECT</span> Sname </span><br><span class="line">    <span class="keyword">FROM</span> Student</span><br><span class="line">    <span class="keyword">WHERE</span> Sdept=‘CS’；</span><br><span class="line"></span><br><span class="line">//查询年龄在<span class="number">20</span>~<span class="number">23</span>岁（包括<span class="number">20</span>岁和<span class="number">23</span>岁）之间的学生的姓名、系别和年龄</span><br><span class="line">    <span class="keyword">SELECT</span> Sname，Sdept，Sage </span><br><span class="line">    <span class="keyword">FROM</span> Student </span><br><span class="line">    <span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span>； </span><br><span class="line">//查询信息系（<span class="keyword">IS</span>）、数学系（MA）和计算机科学系（CS）学生的姓名和性别。</span><br><span class="line">	<span class="keyword">SELECT</span> Sname，Ssex</span><br><span class="line">	<span class="keyword">FROM</span>  Student</span><br><span class="line">	<span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span> ( <span class="string">&#x27;IS&#x27;</span>，<span class="string">&#x27;MA&#x27;</span>，<span class="string">&#x27;CS&#x27;</span> );</span><br><span class="line">	</span><br><span class="line">//匹配串为固定字符串</span><br><span class="line">//查询学号为200215121的学生的详细情况。</span><br><span class="line">     <span class="keyword">SELECT</span> *    </span><br><span class="line">     <span class="keyword">FROM</span>  Student  </span><br><span class="line">     <span class="keyword">WHERE</span>  Sno <span class="keyword">LIKE</span> <span class="string">&#x27;200215121&#x27;</span>;</span><br><span class="line">     </span><br><span class="line">//匹配串为含通配符的字符串</span><br><span class="line">//查询所有姓刘学生的姓名、学号和性别。</span><br><span class="line">      <span class="keyword">SELECT</span> Sname，Sno，Ssex</span><br><span class="line">      <span class="keyword">FROM</span> Student</span><br><span class="line">      <span class="keyword">WHERE</span>  Sname <span class="keyword">LIKE</span> ‘刘%’；</span><br><span class="line"></span><br><span class="line">//查询以<span class="string">&quot;DB_&quot;</span>开头，且倒数第<span class="number">3</span>个字符为 i的课程的详细情况。</span><br><span class="line">      <span class="keyword">SELECT</span>  *</span><br><span class="line">      <span class="keyword">FROM</span>   Course</span><br><span class="line">      <span class="keyword">WHERE</span>  Cname <span class="keyword">LIKE</span>  <span class="string">&#x27;DB\_%i_ _&#x27;</span> ESCAPE <span class="string">&#x27;\&#x27;</span>;</span><br><span class="line">      </span><br><span class="line">//查所有有成绩的学生学号和课程号。</span><br><span class="line">      <span class="keyword">SELECT</span> Sno，Cno</span><br><span class="line">      <span class="keyword">FROM</span>  SC</span><br><span class="line">      <span class="keyword">WHERE</span>  Grade <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>；</span><br></pre></td></tr></table></figure>

<p>（3）<strong>ORDER</strong> BY子句</p>
<ul>
<li>ORDER BY子句<ul>
<li>可以按一个或多个属性列排序</li>
<li>升序：ASC；  降序：DESC；缺省值为升序</li>
</ul>
</li>
<li>当排序列含空值时<ul>
<li>ASC：排序列为空值的元组最后显示</li>
<li>DESC：排序列为空值的元组最先显示 </li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//查询全体学生情况，查询结果按所在系的系号升序排列，同一系中的学生按年龄降序排列。</span><br><span class="line">        <span class="keyword">SELECT</span>  *</span><br><span class="line">        <span class="keyword">FROM</span>  Student</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sdept，Sage <span class="keyword">DESC</span>； </span><br></pre></td></tr></table></figure>

<p>（4） <strong>聚集函数</strong></p>
<ul>
<li><p>计数</p>
<ul>
<li>COUNT（[ DISTINCT | ALL ] *）</li>
<li>COUNT（[ DISTINCT | ALL ] &lt;列名&gt;）</li>
</ul>
</li>
<li><p>计算总和</p>
<ul>
<li>SUM（[ DISTINCT | ALL ] &lt;列名&gt;）    </li>
</ul>
</li>
<li><p>计算平均值</p>
<ul>
<li>AVG（[ DISTINCT | ALL ] &lt;列名&gt;）</li>
</ul>
</li>
<li><p>最大最小值</p>
<ul>
<li>MAX（[ DISTINCT | ALL ] &lt;列名&gt;）</li>
<li>MIN（[ DISTINCT | ALL ] &lt;列名&gt;）</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询选修了课程的学生人数。</span><br><span class="line">     <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> Sno)</span><br><span class="line">     <span class="keyword">FROM</span> SC；</span><br></pre></td></tr></table></figure>

<p>（5）<strong>GROUP</strong> BY子句</p>
<ul>
<li>细化聚集函数的作用对象</li>
<li>未对查询结果分组，聚集函数将作用于整个查询结果</li>
<li> 对查询结果分组后，聚集函数将分别作用于每个组 </li>
<li>作用对象是查询的中间结果表</li>
<li>按指定的一列或多列值分组，值相等的为一组</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询选修了3门以上课程的学生学号。</span><br><span class="line">     <span class="keyword">SELECT</span> Sno</span><br><span class="line">     <span class="keyword">FROM</span>  SC</span><br><span class="line">     <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br><span class="line">     <span class="keyword">HAVING</span>  <span class="keyword">COUNT</span>(*) &gt;<span class="number">3</span>；   </span><br></pre></td></tr></table></figure>

<ul>
<li><strong>HAVING</strong>短语与WHERE子句的区别：<br>作用对象不同<br>WHERE子句作用于基表或视图，从中选择满足条件的元组<br>HAVING短语作用于组，从中选择满足条件的组。 </li>
</ul>
</li>
<li><p><strong>集合查询</strong></p>
<p>并操作UNION<br>交操作INTERSECT<br>差操作EXCEPT</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  查询计算机科学系的学生及年龄不大于19岁的学生。</span><br><span class="line">        <span class="keyword">SELECT</span> *</span><br><span class="line">        <span class="keyword">FROM</span> Student</span><br><span class="line">        <span class="keyword">WHERE</span> Sdept= <span class="string">&#x27;CS&#x27;</span></span><br><span class="line">        <span class="keyword">UNION</span></span><br><span class="line">        <span class="keyword">SELECT</span> *</span><br><span class="line">        <span class="keyword">FROM</span> Student</span><br><span class="line">        <span class="keyword">WHERE</span> Sage&lt;=<span class="number">19</span>；</span><br><span class="line"><span class="keyword">UNION</span>：将多个查询结果合并起来时，系统自动去掉重复元组。</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span>：将多个查询结果合并起来时，保留重复元组 </span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p><strong>连接查询</strong>：同时涉及多个表的查询</p>
<ul>
<li><p>连接条件或连接谓词：用来连接两个表的条件</p>
</li>
<li><p>一般格式：</p>
<ul>
<li>[&lt;表名1&gt;.]&lt;列名1&gt;  &lt;比较运算符&gt;  [&lt;表名2&gt;.]&lt;列名2&gt;</li>
<li>[&lt;表名1&gt;.]&lt;列名1&gt; BETWEEN [&lt;表名2&gt;.]&lt;列名2&gt; AND [&lt;表名2&gt;.]&lt;列名3&gt;</li>
</ul>
</li>
<li><p>连接字段：连接谓词中的列名称</p>
</li>
<li><p>连接条件中的各连接字段类型必须是可比的，但名字不必是相同的</p>
<ul>
<li><strong>等值连接</strong>：连接运算符为 =<br>查询每个学生及其选修课程的情况</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.*，SC.*</span><br><span class="line"><span class="keyword">FROM</span>     Student，SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>自然连接</strong>：<br>查询每个学生及其选修课程的情况</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade</span><br><span class="line"><span class="keyword">FROM</span>     Student，SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>自身连接</strong>：一个表与其自己进行连接<br>需要给表起别名以示区别<br>由于所有属性名都是同名属性，因此必须使用别名前缀</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如：查询每一门课的间接先修课（即先修课的先修课）</span><br><span class="line">     <span class="keyword">SELECT</span>  FIRST.Cno，SECOND.Cpno</span><br><span class="line">     <span class="keyword">FROM</span>  Course  <span class="keyword">FIRST</span>，Course  <span class="keyword">SECOND</span></span><br><span class="line">     <span class="keyword">WHERE</span> FIRST.Cpno = SECOND.Cno；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>外连接与普通连接的区别</strong><br>普通连接操作只输出满足连接条件的元组<br>外连接操作以指定表为连接主体，将主体表中不满足连接条件的元组一并输出</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询每个学生及其选修课程的情况</span><br><span class="line">   <span class="keyword">SELECT</span> Student.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade</span><br><span class="line">    <span class="keyword">FROM</span>  Student  <span class="keyword">LEFT</span> <span class="keyword">OUT</span> <span class="keyword">JOIN</span> SC <span class="keyword">ON</span> (Student.Sno=SC.Sno)； </span><br></pre></td></tr></table></figure>

<ul>
<li><strong>复合条件连接</strong>：WHERE子句中含多个连接条件</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查询每个学生的学号、姓名、选修的课程名及成绩</span><br><span class="line">   <span class="keyword">SELECT</span> Student.Sno，Sname，Cname，Grade</span><br><span class="line">   <span class="keyword">FROM</span>    Student，SC，Course    <span class="comment">/*多表连接*/</span></span><br><span class="line">   <span class="keyword">WHERE</span> Student.Sno = SC.Sno </span><br><span class="line">                   <span class="keyword">and</span> SC.Cno = Course.Cno；</span><br><span class="line"></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
<ol start="6">
<li><p><strong>嵌套查询</strong></p>
<ul>
<li><p>一个SELECT-FROM-WHERE语句称为一个查询块，将一个查询块嵌套在另一个查询块的WHERE子句或HAVING短语的条件中的查询称为嵌套查询</p>
</li>
<li><p><strong>子查询的限制</strong></p>
<ul>
<li>不能使用ORDER BY子句</li>
<li>层层嵌套方式反映了 SQL语言的结构化</li>
<li>有些嵌套查询可以用连接运算替代     </li>
</ul>
</li>
<li><p> <strong>带有IN谓词的子查询</strong> </p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">查询与“刘晨”在同一个系学习的学生。</span><br><span class="line">    <span class="keyword">SELECT</span> Sno，Sname，Sdept</span><br><span class="line">    <span class="keyword">FROM</span> Student</span><br><span class="line">   	<span class="keyword">WHERE</span> Sdept  <span class="keyword">IN</span></span><br><span class="line">                  (<span class="keyword">SELECT</span> Sdept</span><br><span class="line">                   <span class="keyword">FROM</span> Student</span><br><span class="line">                   <span class="keyword">WHERE</span> Sname= ‘ 刘晨 ’)；</span><br><span class="line">用自身连接完成查询要求</span><br><span class="line">      <span class="keyword">SELECT</span>  S1.Sno，S1.Sname，S1.Sdept</span><br><span class="line">      <span class="keyword">FROM</span>     Student S1，Student S2</span><br><span class="line">      <span class="keyword">WHERE</span>  S1.Sdept = S2.Sdept  <span class="keyword">AND</span></span><br><span class="line">                      S2.Sname = <span class="string">&#x27;刘晨&#x27;</span>；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>带有比较运算符的子查询</strong><ul>
<li>当能确切知道内层查询返回单值时，可用比较运算符（&gt;，&lt;，=，&gt;=，&lt;=，!=或&lt; &gt;）。</li>
<li>与ANY或ALL谓词配合使用</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">假设一个学生只可能在一个系学习，并且必须属于一个系，</span><br><span class="line">     <span class="keyword">SELECT</span> Sno，Sname，Sdept</span><br><span class="line">     <span class="keyword">FROM</span>    Student</span><br><span class="line">	 <span class="keyword">WHERE</span> Sdept  =</span><br><span class="line">                   (<span class="keyword">SELECT</span> Sdept</span><br><span class="line">                    <span class="keyword">FROM</span>    Student</span><br><span class="line">                    <span class="keyword">WHERE</span> Sname= ‘刘晨’)；</span><br><span class="line">找出每个学生超过他选修课程平均成绩的课程号。                      <span class="keyword">SELECT</span> Sno， Cno</span><br><span class="line">	 <span class="keyword">FROM</span>  SC  x</span><br><span class="line">	 <span class="keyword">WHERE</span> Grade &gt;=( <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(Grade) </span><br><span class="line">		             <span class="keyword">FROM</span>  SC y</span><br><span class="line">                     <span class="keyword">WHERE</span> y.Sno=x.Sno ) ;</span><br></pre></td></tr></table></figure>

<ul>
<li> <strong>带有ANY（SOME）或ALL谓词的子查询</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">查询其他系中比计算机科学某一学生年龄小的学生姓名和年龄</span><br><span class="line">     <span class="keyword">SELECT</span> Sname，Sage</span><br><span class="line">	 <span class="keyword">FROM</span>    Student</span><br><span class="line">	 <span class="keyword">WHERE</span> Sage &lt; <span class="keyword">ANY</span> (<span class="keyword">SELECT</span>  Sage</span><br><span class="line">                       <span class="keyword">FROM</span>    Student</span><br><span class="line">                       <span class="keyword">WHERE</span> Sdept= <span class="string">&#x27; CS &#x27;</span>)</span><br><span class="line">           <span class="keyword">AND</span> Sdept &lt;&gt; ‘CS <span class="string">&#x27; ;  </span></span><br></pre></td></tr></table></figure>

<ul>
<li>带有<strong>EXISTS</strong>谓词的子查询<ul>
<li>EXISTS谓词<ul>
<li>带有EXISTS谓词的子查询不返回任何数据，只产生逻辑值“true”或逻辑假值“false”。</li>
<li>若内层查询结果非空，则外层的WHERE子句返回真值</li>
<li>若内层查询结果为空，则外层的WHERE子句返回假值</li>
<li>由EXISTS引出的子查询，其目标列表达式通常都用* ，因为带EXISTS的子查询只返回真值或假值，给出列名无实际意义</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">查询没有选修1号课程的学生姓名。</span><br><span class="line">     <span class="keyword">SELECT</span> Sna me</span><br><span class="line">     <span class="keyword">FROM</span> Student</span><br><span class="line">     <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">             (<span class="keyword">SELECT</span> *</span><br><span class="line">              <span class="keyword">FROM</span> SC</span><br><span class="line">              <span class="keyword">WHERE</span> Sno = Student.Sno <span class="keyword">AND</span> Cno=<span class="string">&#x27;1&#x27;</span>)；</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="3-数据定义"><a href="#3-数据定义" class="headerlink" title="3 数据定义"></a>3 数据定义</h2><ul>
<li>SQL的数据定义功能: 模式定义、表定义、视图和索引的定义</li>
</ul>
<p><img src="https://reborn-photo-url.oss-cn-beijing.aliyuncs.com/oss:/hxx_photo/sql%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89.PNG"></p>
<ul>
<li><p><strong>模式</strong></p>
<ul>
<li>定义模式实际上定义了一个命名空间，在这个空间中可以定义该模式包含的数据库对象，例如基本表、视图、索引等。</li>
<li>删除模式：DROP SCHEMA &lt;模式名&gt; &lt;CASCADE | RESTRICT&gt;<ul>
<li>CASCADE(级联)<pre><code>删除模式的同时把该模式中所有的数据库对象全部删除</code></pre>
</li>
<li>RESTRICT(限制)<br> 如果该模式中定义了下属的数据库对象（如表、视图等），则拒绝该删除语句的执行。当该模式中没有任何下属的对象时才能执行。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>基本表</strong></p>
<ul>
<li><strong>定义基本表</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">建立“学生”表Student，学号是主码，姓名取值唯一。</span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student          </span><br><span class="line">	      (Sno   <span class="built_in">CHAR</span>(<span class="number">9</span>) PRIMARY <span class="keyword">KEY</span>， </span><br><span class="line">            Sname  <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>，<span class="comment">/* Sname取唯一值*/</span></span><br><span class="line">            Ssex    <span class="built_in">CHAR</span>(<span class="number">2</span>)，</span><br><span class="line">            Sage   <span class="built_in">SMALLINT</span>，</span><br><span class="line">            Sdept  <span class="built_in">CHAR</span>(<span class="number">20</span>)</span><br><span class="line">           )； </span><br><span class="line">建立一个“课程”表Course</span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  Course</span><br><span class="line">           ( Cno    <span class="built_in">CHAR</span>(<span class="number">4</span>) PRIMARY <span class="keyword">KEY</span>，</span><br><span class="line">             Cname  <span class="built_in">CHAR</span>(<span class="number">40</span>)，            </span><br><span class="line">             Cpno    <span class="built_in">CHAR</span>(<span class="number">4</span>) ，               	 </span><br><span class="line">             Ccredit  <span class="built_in">SMALLINT</span>，</span><br><span class="line">             <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (Cpno) <span class="keyword">REFERENCES</span> Course(Cno) </span><br><span class="line">            ); </span><br><span class="line">建立一个“学生选课”表SC</span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  SC</span><br><span class="line">       	(Sno  <span class="built_in">CHAR</span>(<span class="number">9</span>)， </span><br><span class="line">       	Cno  <span class="built_in">CHAR</span>(<span class="number">4</span>)，  </span><br><span class="line">       	Grade    <span class="built_in">SMALLINT</span>，</span><br><span class="line">      <span class="comment">/* 主码由两个属性构成，必须作为表级完整性进行定义*/</span></span><br><span class="line">       	PRIMARY <span class="keyword">KEY</span> (Sno，Cno)，</span><br><span class="line">      <span class="comment">/* 表级完整性约束条件，Sno是外码，被参照表是Student */</span></span><br><span class="line">       	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (Sno) <span class="keyword">REFERENCES</span> Student(Sno)，</span><br><span class="line">      <span class="comment">/* 表级完整性约束条件， Cno是外码，被参照表是Course*/</span></span><br><span class="line">       	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (Cno) <span class="keyword">REFERENCES</span> Course(Cno)</span><br><span class="line">		); </span><br></pre></td></tr></table></figure>

<ul>
<li><strong>修改基本表</strong>：不论基本表中原来是否已有数据，新增加的列一律为空值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*向Student表增加“入学时间”列，其数据类型为日期型。*/</span></span><br><span class="line">     <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Student <span class="keyword">ADD</span> S_entrance <span class="built_in">DATE</span>；</span><br><span class="line"><span class="comment">/*将年龄的数据类型由字符型（假设原来的数据类型是字符型）改为整数。*/</span></span><br><span class="line">    <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Student <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> Sage <span class="built_in">INT</span>；</span><br><span class="line"><span class="comment">/*增加课程名称必须取唯一值的约束条件。*/</span></span><br><span class="line">    <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Course <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(Cname); </span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p><strong>删除基本表</strong>：DROP TABLE &lt;表名&gt;［RESTRICT| CASCADE］；</p>
<ul>
<li>RESTRICT：删除表是有限制的。<br>欲删除的基本表不能被其他表的约束所引用。如果存在依赖该表的对象，则此表不能被删除</li>
<li>CASCADE：删除该表没有限制。<br>在删除基本表的同时，相关的依赖对象一起删除 </li>
</ul>
</li>
<li><p><strong>索引</strong></p>
<ul>
<li>建立索引的目的：加快查询速度</li>
<li>谁可以建立索引<br>DBA 或 表的属主（即建立表的人）<br>DBMS一般会自动建立以下列上的索引<pre><code>  PRIMARY  KEY
  UNIQUE</code></pre>
</li>
<li>谁维护索引<pre><code> DBMS自动完成 </code></pre>
</li>
<li>使用索引<pre><code> DBMS自动选择是否使用索引以及使用哪些索引</code></pre>
</li>
<li>RDBMS中索引一般采用B+树、HASH索引来实现<ul>
<li>B+树索引具有动态平衡的优点 ，HASH索引具有查找速度快的特点，采用B+树，还是HASH索引 则由具体的RDBMS来决定</li>
<li>索引是关系数据库的内部实现技术，属于内模式的范畴 </li>
<li>CREATE INDEX语句定义索引时，可以定义索引是唯一索引、非唯一索引或聚簇索引 </li>
<li>在最经常查询的列上建立聚簇索引以提高查询效率 ，一个基本表上最多只能建立一个聚簇索引 ，经常更新的列不宜建立聚簇索引 </li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*在Student表的Sname（姓名）列上建立一个聚簇索引*/</span></span><br><span class="line"><span class="keyword">CREATE</span> CLUSTER <span class="keyword">INDEX</span> Stusname <span class="keyword">ON</span>  Student(Sname)；</span><br><span class="line"><span class="comment">/* SC表按学号升序和课程号降序建唯一索引*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span>  SCno <span class="keyword">ON</span> SC(Sno <span class="keyword">ASC</span>，Cno <span class="keyword">DESC</span>)；</span><br></pre></td></tr></table></figure>

<ul>
<li>删除索引时，系统会从数据字典中删去有关该索引的描述。</li>
</ul>
</li>
</ul>
<h2 id="4-数据更新"><a href="#4-数据更新" class="headerlink" title="4 数据更新"></a>4 数据更新</h2><ol>
<li><p><strong>插入数据</strong></p>
</li>
<li><p><strong>修改数据</strong></p>
<ul>
<li><strong>语句格式</strong><br>   UPDATE  &lt;表名&gt;<pre><code>SET  &lt;列名&gt;=&lt;表达式&gt;[，&lt;列名&gt;=&lt;表达式&gt;]…
[WHERE &lt;条件&gt;]；</code></pre>
</li>
<li><strong>功能</strong><br>修改指定表中满足WHERE子句条件的元组的指定列值</li>
</ul>
</li>
<li><p><strong>删除数据</strong></p>
<p><strong>语句格式</strong></p>
<pre><code>   DELETE
   FROM     &lt;表名&gt;
   [WHERE &lt;条件&gt;]；</code></pre>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*插入一条选课记录( &#x27;200215128&#x27;，&#x27;1 &#x27;)。*/</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC(Sno，Cno) <span class="keyword">VALUES</span> (‘ <span class="number">200215128</span> ’，‘<span class="number">1</span><span class="string">&#x27;); </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*将计算机科学系全体学生的成绩置零。*/</span></span><br><span class="line"><span class="string">       UPDATE SC</span></span><br><span class="line"><span class="string">        SET  Grade=0</span></span><br><span class="line"><span class="string">        WHERE  &#x27;</span>CS<span class="string">&#x27;=</span></span><br><span class="line"><span class="string">                (SELETE Sdept</span></span><br><span class="line"><span class="string">                 FROM  Student</span></span><br><span class="line"><span class="string">                 WHERE  Student.Sno = SC.Sno)；</span></span><br><span class="line"><span class="string">/*删除学号为200215128的学生记录。*/</span></span><br><span class="line"><span class="string"> DELETE FROM Student WHERE Sno= ‘200215128 &#x27;</span>；</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="5-视图"><a href="#5-视图" class="headerlink" title="5 视图"></a>5 视图</h2><ol>
<li><p><strong>视图的特点</strong></p>
<ul>
<li>虚表，是从一个或几个基本表（或视图）导出的表</li>
<li>只存放视图的定义，不存放视图对应的数据</li>
<li>基表中的数据发生变化，从视图中查询出的数据也随之改变</li>
</ul>
</li>
<li><p><strong>基于视图的操作</strong></p>
<ul>
<li>查询</li>
<li> 删除</li>
<li> 受限更新</li>
<li> 定 义基于该视图的新视图。</li>
</ul>
</li>
<li><p><strong>定义视图</strong></p>
<ul>
<li><strong>语句格式</strong><pre><code>   CREATE  VIEW  &lt;视图名&gt;  [(&lt;列名&gt;  [，&lt;列名&gt;]…)]
   AS  &lt;子查询&gt;
   [WITH  CHECK  OPTION]；</code></pre>
</li>
<li>成视图的属性列组名：全部省略或全部指定</li>
<li>子查询不允许含有ORDER B‘’‘Y子句和DISTINCT短语</li>
<li>RDBMS执行CREATE VIEW语句时只是把视图定义存入数据字典，并不执行其中的SELECT语句。</li>
<li>在对视图查询时，按视图的定义从基本表中将数据查出。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*建立信息系学生的视图，并要求进行修改和插入操作时仍需保证该视图只有信息系的学生。*/</span></span><br><span class="line">        <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_Student</span><br><span class="line">        <span class="keyword">AS</span> </span><br><span class="line">        <span class="keyword">SELECT</span> Sno，Sname，Sage</span><br><span class="line">        <span class="keyword">FROM</span>  Student</span><br><span class="line">        <span class="keyword">WHERE</span>  Sdept= <span class="string">&#x27;IS&#x27;</span></span><br><span class="line">        <span class="keyword">WITH</span> <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>；</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">带WITH CHECK OPTION选项时对IS_Student视图的更新操作：</span></span><br><span class="line"><span class="comment">修改操作：自动加上Sdept= &#x27;IS&#x27;的条件</span></span><br><span class="line"><span class="comment">删除操作：自动加上Sdept= &#x27;IS&#x27;的条件</span></span><br><span class="line"><span class="comment">插入操作：自动检查Sdept属性值是否为&#x27;IS&#x27; </span></span><br><span class="line"><span class="comment">如果不是，则拒绝该插入操作</span></span><br><span class="line"><span class="comment">如果没有提供Sdept属性值，则自动定义Sdept为&#x27;IS&#x27;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>基于多个基表的视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*建立信息系选修了1号课程的学生视图。*/</span></span><br><span class="line">	    <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_S1(Sno，Sname，Grade)</span><br><span class="line">        <span class="keyword">AS</span> </span><br><span class="line">        <span class="keyword">SELECT</span> Student.Sno，Sname，Grade</span><br><span class="line">        <span class="keyword">FROM</span>  Student，SC</span><br><span class="line">        <span class="keyword">WHERE</span>  Sdept= <span class="string">&#x27;IS&#x27;</span> <span class="keyword">AND</span></span><br><span class="line">                       Student.Sno=SC.Sno <span class="keyword">AND</span></span><br><span class="line">                       SC.Cno= <span class="string">&#x27;1&#x27;</span>；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>基于视图的视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 建立信息系选修了1号课程且成绩在90分以上的学生的视图。*/</span></span><br><span class="line">        <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_S2</span><br><span class="line">        <span class="keyword">AS</span></span><br><span class="line">        <span class="keyword">SELECT</span> Sno，Sname，Grade</span><br><span class="line">        <span class="keyword">FROM</span>  IS_S1</span><br><span class="line">        <span class="keyword">WHERE</span>  Grade&gt;=<span class="number">90</span>；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>带表达式的视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*定义一个反映学生出生年份的视图。*/</span></span><br><span class="line">        <span class="keyword">CREATE</span>  <span class="keyword">VIEW</span> BT_S(Sno，Sname，Sbirth)</span><br><span class="line">        <span class="keyword">AS</span> </span><br><span class="line">        <span class="keyword">SELECT</span> Sno，Sname，<span class="number">2007</span>-Sage</span><br><span class="line">        <span class="keyword">FROM</span>  Student；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>分组视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*将学生的学号及他的平均成绩定义为一个视图,假设SC表中“成绩”列Grade为数字型*/</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">VIEW</span> S_G(Sno,Gavg)</span><br><span class="line">	<span class="keyword">AS</span></span><br><span class="line">	<span class="keyword">SELECT</span> Sno,<span class="keyword">AVG</span>(Grade)</span><br><span class="line">	<span class="keyword">FROM</span> SC</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>不指定属性列</strong>:</p>
<p>缺点：修改基表Student的结构后，Student表与F_Student视图的映象关系被破坏，导致该视图不能正确工作。</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> F_Student(F_Sno，<span class="keyword">name</span>，sex，age，dept)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span> Ssex=‘女’；</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除视图</strong></p>
<ul>
<li>语句的格式：DROP  VIEW  &lt;视图名&gt;；</li>
<li>该语句从数据字典中删除指定的视图定义</li>
<li>如果该视图上还导出了其他视图，使用CASCADE级联删除语句，把该视图和由它导出的所有视图一起删除 </li>
<li>删除基表时，由该基表导出的所有视图定义都必须显式地使用DROP VIEW语句删除 </li>
</ul>
</li>
<li><p><strong>查询视图</strong></p>
<ul>
<li>用户角度：查询视图与查询基本表相同</li>
<li>RDBMS实现视图查询的方法<ul>
<li>视图消解法（View Resolution）</li>
<li>进行有效性检查</li>
<li>转换成等价的对基本表的查询</li>
<li>执行修正后的查询</li>
<li>有些情况下，视图消解法不能生成正确查询。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>更新视图</strong></p>
<ul>
<li>更新视图的限制：一些视图是不可更新的，因为对这些视图的更新不能唯一地有意义地转换成对相应基本表的更新</li>
</ul>
</li>
<li><p><strong>视图的作用</strong></p>
<ul>
<li>视图能够简化用户的操作<br>视图机制使用户可以将注意力集中在他所关心的数据上。如果这些数据不是直接来自基本表，则可以通过定义视图，使用户眼中的数据库结构简单、清晰，并且可以简化用户的数据查询操作。</li>
<li>视图使用户能以多种角度看待同一数据<br>视图机制能使不同的用户以不同的方式看待同一数据，当许多不同种类的用户使用同一个数据库时，这种灵活性是非常重要的。</li>
<li>视图对重构数据库提供了一定程度的逻辑独立性 </li>
<li>视图能够对机密数据提供安全保护<br>有了视图机制，就可以在设计数据库应用系统时，对不同的用户定义不同的视图，使机密数据不出现在不应看到这些数据的用户视图上，这样就由视图的机制自动提供了对机密数据的安全保护功能。 </li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hxx-98.github.io/2020/03/12/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/" data-id="cknhe7byk008rows6fe5z2dwz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E3%80%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E3%80%8B/" rel="tag">《数据库系统概论》</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/03/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          《数据库系统概论》(王珊  萨师煊)复习笔记（四）
        
      </div>
    </a>
  
  
    <a href="/2020/03/11/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">《数据库系统概论》(王珊  萨师煊)复习笔记（二）</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">Java设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/" rel="tag">javaweb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E3%80%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E3%80%8B/" rel="tag">《数据库系统概论》</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">Java设计模式</a> <a href="/tags/MySQL/" style="font-size: 11.67px;">MySQL</a> <a href="/tags/SSM/" style="font-size: 15px;">SSM</a> <a href="/tags/c/" style="font-size: 16.67px;">c++</a> <a href="/tags/javaweb/" style="font-size: 18.33px;">javaweb</a> <a href="/tags/%E3%80%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E3%80%8B/" style="font-size: 13.33px;">《数据库系统概论》</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/13/MyBatis%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/">MyBatis多表查询</a>
          </li>
        
          <li>
            <a href="/2021/04/11/MyBatis%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8A%A8%E6%80%81SQL/">MyBatis映射文件的动态SQL</a>
          </li>
        
          <li>
            <a href="/2021/04/09/MyBatis%E4%BA%8B%E5%8A%A1/">MyBatis事务</a>
          </li>
        
          <li>
            <a href="/2021/04/09/MyBatis%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/">MyBatis数据库连接池</a>
          </li>
        
          <li>
            <a href="/2021/04/08/SqlMapConfig-xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">SqlMapConfig.xml配置文件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 hxx-98<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>